<!DOCTYPE html>

<html lang="es">

    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Factura JS</title>
    </head>

    <body>
        <table border="1" id="tabla">
            <thead>
                <th>Cantidad</th>
                <th>Producto</th>
                <th>Precio</th>
            </thead>

            <tbody class="viveres"></tbody>

            <tfoot class="totalPagar"></tfoot>
        </table>


        <script>
            const TABLA = document.getElementById("tabla");
            const FACTURA = TABLA.querySelector(".viveres");
            const PRECIO_FACTURA = TABLA.querySelector(".totalPagar");
            let isVerdadero = true;

          while (isVerdadero) {
            let nombreProducto = prompt("Nombre del producto: ");
            let precioProducto = Number(prompt("Precio del producto: "));
            let cantidadProducto = Number(prompt("Cantidad del producto: "));

            function validarNombre(nombre) {
                while (!isNaN(nombre) || nombre.length === 0) {
                    alert("Error, el nombre del producto no puede ser vacío ni componerse de solo números");
                    nombre = prompt("Nombre del producto: ");
                }
                return nombre;
            }

            function validarPrecio(precio) {
                while (isNaN(precio) || typeof precio !== "number" || precio <= 0) {
                    alert("Error, el precio ingresado es inválido. Inténtelo de nuevo.");
                    precio = Number(prompt("Precio del producto: "));
                }
                return precio;
            }

            function validarCantidad(cantidad) {
                while (isNaN(cantidad) || typeof cantidad !== "number" || cantidad <= 0) {
                    alert("Error, la cantidad ingresada es inválida. Inténtelo de nuevo.");
                    cantidad = Number(prompt("Cantidad del producto: "));
                }
                return cantidad;
            }

            FACTURA.innerHTML += `
                <tr>
                    <td>${validarCantidad(cantidadProducto)}</td>
                    <td>${validarNombre(nombreProducto)}</td>
                    <td>$${validarPrecio(precioProducto).toFixed(2)*cantidadProducto}COP</td>
                </tr>
            `;
                        let continuar = prompt("¿Desea agregar otro producto? (S/N)");
                
                if (continuar.toUpperCase() === "N") {
                    isVerdadero = false;
                    break;
                } else if (continuar.toUpperCase() === "S") {
                    isVerdadero = true;
                }
            }
            </script>
    </body>
</html>